{% load static %}
<!doctype html>
<html lang="es">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <script>
  const theme = localStorage.getItem('theme');
  if (theme === 'dark') {
      document.documentElement.classList.add('dark');
  } else if (theme === 'light') {
      document.documentElement.classList.remove('dark');
  }
</script>


  <title>{% block title %}Twittor{% endblock %}</title>

  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <script>
    tailwind.config = {
      darkMode: 'class',
      theme: {
        extend: {
          fontFamily: {
            sans: ['Inter', 'ui-sans-serif', 'system-ui', 'Segoe UI', 'Roboto']
          },
          boxShadow: {
            soft: '0 10px 30px rgba(2,6,23,.08)'
          },
          colors: {
            brand: {
              50: '#eef2ff',
              100: '#e0e7ff',
              500: '#6366f1',
              600: '#4f46e5',
              700: '#4338ca'
            }
          }
        }
      }
    }
  </script>

  <!-- Estilos -->
  <style type="text/tailwindcss">
    @layer components {
      .btn { @apply inline-flex items-center justify-center gap-2 px-4 py-2 rounded-xl font-medium transition focus:outline-none focus:ring-2 focus:ring-offset-2; }
      .btn-primary { @apply btn bg-brand-600 text-white hover:bg-brand-700; }
      .btn-outline { @apply btn border border-gray-300 dark:border-gray-700 hover:bg-gray-100 dark:hover:bg-gray-800; }
      .btn-ghost { @apply btn bg-white/0 hover:bg-gray-100 dark:hover:bg-gray-800; }
      .input {
      @apply 
        w-full 
        rounded-xl 
        border 
        border-gray-300 
        dark:border-gray-700
        bg-white 
        dark:bg-gray-900
        text-gray-900
        dark:text-gray-100
        px-3 py-2
        focus:ring-2 
        focus:ring-brand-500 
        focus:outline-none;
    }
      .card { @apply bg-white/80 dark:bg-gray-900/70 backdrop-blur rounded-2xl shadow-soft border border-white/50 dark:border-white/10; }
      .chip { @apply inline-flex items-center px-2.5 py-1 rounded-full text-xs font-medium bg-gray-100 dark:bg-gray-800 text-gray-700 dark:text-gray-200; }
      .fab { @apply fixed bottom-6 right-6 bg-brand-600 text-white rounded-full shadow-lg hover:bg-brand-700 transition p-4; }
    }
    @layer utilities {
  /* Solo modo oscuro */
  .dark input:-webkit-autofill {
    box-shadow: 0 0 0px 1000px rgb(17 24 39) inset !important;
    -webkit-text-fill-color: rgb(243 244 246) !important;
  }

  .dark input:-webkit-autofill:focus {
    box-shadow: 0 0 0px 1000px rgb(17 24 39) inset !important;
    -webkit-text-fill-color: rgb(243 244 246) !important;
  }

  /* Modo claro */
  input:-webkit-autofill {
    box-shadow: 0 0 0px 1000px white inset !important;
    -webkit-text-fill-color: black !important;
  }

  input:-webkit-autofill:focus {
    box-shadow: 0 0 0px 1000px white inset !important;
    -webkit-text-fill-color: black !important;
  }
}


  </style>

  {% block head %}{% endblock %}
</head>

<body class="font-sans bg-white dark:bg-gray-950 text-gray-900 dark:text-gray-100">

  <!-- NAVBAR -->
  <nav class="sticky top-0 z-30 bg-white/70 dark:bg-gray-900/60 backdrop-blur border-b border-gray-200/60 dark:border-white/5">
    <div class="max-w-6xl mx-auto px-4 py-3 flex items-center gap-4">

      <a href="{% url 'timeline' %}" class="flex items-center gap-2 font-extrabold text-lg">
        <img src="{% static 'images/logo.png' %}" class="w-6 h-6" alt="">
        Twittor
      </a>

      <form action="{% url 'search' %}" method="get" class="hidden md:flex items-center gap-2 flex-1 max-w-md ml-4">
        <input type="text" name="q" placeholder="Buscar..." class="input">
      </form>

      <div class="flex items-center gap-2 ml-auto">
        <button id="theme-toggle" class="chip">
            Cambiar tema
        </button>
        <a href="{% url 'explore' %}" class="chip">Explorar</a>

        {% if user.is_authenticated %}
          <a href="{% url 'my_lists' %}" class="chip">Listas</a>
          <a href="{% url 'lista_colecciones' %}" class="chip">Colecciones</a>
        {% endif %}

        <a href="{% url 'notifications' %}" class="chip">Notificaciones</a>

        {% if user.is_authenticated %}
          <a href="{% url 'profile' user.username %}" class="chip">@{{ user.username }}</a>
          <form action="{% url 'logout' %}" method="post">
            {% csrf_token %}
            <button class="btn-outline">Salir</button>
          </form>
        {% else %}
          <a href="{% url 'login' %}" class="btn-outline">Entrar</a>
          <a href="{% url 'signup' %}" class="btn-primary">Crear cuenta</a>
        {% endif %}

      </div>
    </div>
  </nav>

  <!-- CONTENIDO GENERAL -->
  <main class="max-w-6xl mx-auto px-4 py-8">
    {% if messages %}
      <div class="space-y-2 mb-4">
        {% for m in messages %}
          <div class="p-3 rounded-lg bg-blue-100 text-blue-900">{{ m }}</div>
        {% endfor %}
      </div>
    {% endif %}

    {% block content %}{% endblock %}
  </main>

  <footer class="text-center text-xs text-gray-500 py-10">
    Hecho con <span class="text-brand-600">Django</span> + <span class="text-brand-600">Tailwind</span>
  </footer>

  <script src="{% static 'app.js' %}"></script>
  <script src="{% static 'js/theme.js' %}"></script>
</body>
</html>
